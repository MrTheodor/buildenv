FROM fedora:latest
ENV DEBIAN_FRONTEND noninteractive
RUN dnf install -y make cmake git gcc-c++ doxygen python2-devel openmpi-devel environment-modules python-pip clang compiler-rt ccache findutils boost-devel python2-sphinx fftw-devel python-matplotlib texlive-latex-bin graphviz boost-openmpi-devel ghostscript mpi4py-openmpi texlive-hyphen-base texlive-cm texlive-cmap

RUN useradd -m espressopp
USER espressopp
ENV PATH=/usr/lib64/ccache:${PATH}${PATH:+:}/usr/lib64/openmpi/bin/
ENV PYTHONPATH=/usr/lib64/python2.7/site-packages/openmpi${PYTHONPATH:+:}${PYTHONPATH}
WORKDIR /home/espressopp
RUN pip install --user codecov
