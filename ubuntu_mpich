FROM ubuntu:latest
ENV DEBIAN_FRONTEND noninteractive
RUN apt-get update && apt-get install -y build-essential mpich libmpich-dev libfftw3-dev libboost-all-dev git python-mpi4py cmake python-numpy ipython clang llvm ccache python-pip doxygen sphinx-common python-matplotlib graphviz texlive-latex-base texlive-latex-extra texlive-latex-recommended ghostscript && apt-get clean && rm -rf /var/lib/apt/lists/*

RUN useradd -m espressopp
USER espressopp
ENV PATH=/usr/lib/ccache:${PATH}${PATH:+:}
WORKDIR /home/espressopp
RUN pip install --user codecov
